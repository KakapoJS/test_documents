# 录音文件识别结果查询

## 1. 接口描述

接口请求域名：dev-winner-api.neunit.com:18052
接口请求路径： POST /cloud/asr/v1/get_task_status

在调用录音文件识别请求接口后，支持通过轮询方式获取识别结果。
- 需要主动提交任务ID来轮询识别结果，共有任务成功、等待、执行中和失败四种结果，具体信息请参见下文说明。
- 结果可在服务端保存1天

## 2. 输入参数

以下请求参数列表仅列出了接口请求参数。

| 参数名称   | 必选 | 类型    | 描述                                                         |
| :--------- | :--- | :------ | :----------------------------------------------------------- |
| task_id       | 是   | String  | 任务标识，通过 file 接口获取。|


## 3. 输出参数

| 参数名称   | 类型   | 描述                      |
| :--------- | :----- | :------------------------ |
| rid | String | 本次请求唯一 id |
| code | Integer | 状态码，成功为 0，错误为其他值 | 
| msg | String | 状态信息，成功为 OK，错误为其他信息 | 
| data | Object | 返回数据，成功状态下有值，具体结构见下文 |

### data 参数结构

| 参数名称   | 类型   | 描述                      |
| :--------- | :----- | :------------------------ |
| status | Integer | 任务状态码，0：任务等待，1：任务执行中，2：任务成功，3：任务失败。 |
| result | String | 识别结果。 | 
| error_msg | String | 失败原因说明。 | 
| percent | Float | 任务进度百分比。 | 

## 4. 示例

### 示例1 轮询结果——任务成功

用户通过轮询方式获取识别结果，任务成功，并返回识别结果。

#### 输入示例

```json
POST / HTTP/1.1
Host: host
Content-Type: application/json
Path: /cloud/asr/v1/get_task_status

{
  "task_id": "q-FZXUkFrnXKIZueZFKc",
}
```



#### 输出示例

```json
{
    "rid": "ab8a260e-3ffe-598a-bbcb-32324bb760d3",
    "code": 0,
    "msg": "OK",
    "data": {
      "status": 2,
      "result": "这是个一成功样例",
      "error_msg": "",
      "percent": 100
    }
}
```



## 5. 开发者资源

### SDK

云 API 提供了配套的开发工具集（SDK），支持多种编程语言，能更方便的调用 API。
- [Neunit Cloud SDK for Go](https://neunit.coding.net/p/kms/d/cloud-sdk-go/git)


## 6. 错误码

以下仅列出了接口业务逻辑相关的错误码，其他错误码详见 [公共错误码](../error/%E5%85%AC%E5%85%B1%E9%94%99%E8%AF%AF%E7%A0%81.md)。

| 错误码                                    | 描述                                                         |
| :---------------------------------------- | :----------------------------------------------------------- |
| 10101001           | 音频文件 url 获取失败。                                      |
| 10101002           | 参数 url 不能为空。                                         |
| 10101003           | 参数 data 不能为空。                                  |
| 10101004           | 参数 data 解析失败。                                  |
| 10101005           | asr 转义失败，请稍后重试。                                    |